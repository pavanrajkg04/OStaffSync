import{a as e}from"./rolldown-runtime-D_juG1Xi.js";import{t}from"./react-BcXKmAwN.js";import{A as n,D as r,M as i,O as a,j as o,k as s}from"./esm-d7QI_Eml.js";var c=e(t(),1),l=e(o(),1),u=`Label`,d=c.forwardRef((e,t)=>(0,l.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{t.target.closest(`button, input, select, textarea`)||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));d.displayName=u;var[f,p]=s(`Form`),m=`Form`,[h,g]=f(m),[_,v]=f(m),y=c.forwardRef((e,t)=>{let{__scopeForm:r,onClearServerErrors:o=()=>{},...s}=e,u=c.useRef(null),d=i(t,u),[f,p]=c.useState({}),m=c.useCallback(e=>f[e],[f]),g=c.useCallback((e,t)=>p(n=>({...n,[e]:{...n[e]??{},...t}})),[]),v=c.useCallback(e=>{p(t=>({...t,[e]:void 0})),T(t=>({...t,[e]:{}}))},[]),[y,b]=c.useState({}),x=c.useCallback(e=>y[e]??[],[y]),S=c.useCallback((e,t)=>{b(n=>({...n,[e]:[...n[e]??[],t]}))},[]),C=c.useCallback((e,t)=>{b(n=>({...n,[e]:(n[e]??[]).filter(e=>e.id!==t)}))},[]),[w,T]=c.useState({}),E=c.useCallback(e=>w[e]??{},[w]),D=c.useCallback((e,t)=>{T(n=>({...n,[e]:{...n[e]??{},...t}}))},[]),[O,k]=c.useState({}),A=c.useCallback((e,t)=>{k(n=>{let r=new Set(n[e]).add(t);return{...n,[e]:r}})},[]),j=c.useCallback((e,t)=>{k(n=>{let r=new Set(n[e]);return r.delete(t),{...n,[e]:r}})},[]),M=c.useCallback(e=>Array.from(O[e]??[]).join(` `)||void 0,[O]);return(0,l.jsx)(h,{scope:r,getFieldValidity:m,onFieldValidityChange:g,getFieldCustomMatcherEntries:x,onFieldCustomMatcherEntryAdd:S,onFieldCustomMatcherEntryRemove:C,getFieldCustomErrors:E,onFieldCustomErrorsChange:D,onFieldValiditionClear:v,children:(0,l.jsx)(_,{scope:r,onFieldMessageIdAdd:A,onFieldMessageIdRemove:j,getFieldDescription:M,children:(0,l.jsx)(n.form,{...s,ref:d,onInvalid:a(e.onInvalid,e=>{let t=U(e.currentTarget);t===e.target&&t.focus(),e.preventDefault()}),onSubmit:a(e.onSubmit,o,{checkForDefaultPrevented:!1}),onReset:a(e.onReset,o)})})})});y.displayName=m;var b=`FormField`,[x,S]=f(b),C=c.forwardRef((e,t)=>{let{__scopeForm:i,name:a,serverInvalid:o=!1,...s}=e,c=g(b,i).getFieldValidity(a),u=r();return(0,l.jsx)(x,{scope:i,id:u,name:a,serverInvalid:o,children:(0,l.jsx)(n.div,{"data-valid":J(c,o),"data-invalid":Y(c,o),...s,ref:t})})});C.displayName=b;var w=`FormLabel`,T=c.forwardRef((e,t)=>{let{__scopeForm:n,...r}=e,i=g(w,n),a=S(w,n),o=r.htmlFor||a.id,s=i.getFieldValidity(a.name);return(0,l.jsx)(d,{"data-valid":J(s,a.serverInvalid),"data-invalid":Y(s,a.serverInvalid),...r,ref:t,htmlFor:o})});T.displayName=w;var E=`FormControl`,D=c.forwardRef((e,t)=>{let{__scopeForm:r,...o}=e,s=g(E,r),u=S(E,r),d=v(E,r),f=c.useRef(null),p=i(t,f),m=o.name||u.name,h=o.id||u.id,_=s.getFieldCustomMatcherEntries(m),{onFieldValidityChange:y,onFieldCustomErrorsChange:b,onFieldValiditionClear:x}=s,C=c.useCallback(async e=>{if(q(e.validity)){let t=z(e.validity);y(m,t);return}let t=e.form?new FormData(e.form):new FormData,n=[e.value,t],r=[],i=[];_.forEach(e=>{W(e,n)?i.push(e):G(e)&&r.push(e)});let a=r.map(({id:e,match:t})=>[e,t(...n)]),o=Object.fromEntries(a),s=Object.values(o).some(Boolean),c=s;e.setCustomValidity(c?O:``);let l=z(e.validity);if(y(m,l),b(m,o),!s&&i.length>0){let t=i.map(({id:e,match:t})=>t(...n).then(t=>[e,t])),r=await Promise.all(t),a=Object.fromEntries(r),o=Object.values(a).some(Boolean);e.setCustomValidity(o?O:``);let s=z(e.validity);y(m,s),b(m,a)}},[_,m,b,y]);c.useEffect(()=>{let e=f.current;if(e){let t=()=>C(e);return e.addEventListener(`change`,t),()=>e.removeEventListener(`change`,t)}},[C]);let w=c.useCallback(()=>{let e=f.current;e&&(e.setCustomValidity(``),x(m))},[m,x]);c.useEffect(()=>{let e=f.current?.form;if(e)return e.addEventListener(`reset`,w),()=>e.removeEventListener(`reset`,w)},[w]),c.useEffect(()=>{let e=f.current,t=e?.closest(`form`);if(t&&u.serverInvalid){let n=U(t);n===e&&n.focus()}},[u.serverInvalid]);let T=s.getFieldValidity(m);return(0,l.jsx)(n.input,{"data-valid":J(T,u.serverInvalid),"data-invalid":Y(T,u.serverInvalid),"aria-invalid":u.serverInvalid?!0:void 0,"aria-describedby":d.getFieldDescription(m),title:``,...o,ref:p,id:h,name:m,onInvalid:a(e.onInvalid,e=>{let t=e.currentTarget;C(t)}),onChange:a(e.onChange,e=>{w()})})});D.displayName=E;var O=`This value is not valid`,k={badInput:O,patternMismatch:`This value does not match the required pattern`,rangeOverflow:`This value is too large`,rangeUnderflow:`This value is too small`,stepMismatch:`This value does not match the required step`,tooLong:`This value is too long`,tooShort:`This value is too short`,typeMismatch:`This value does not match the required type`,valid:void 0,valueMissing:`This value is missing`},A=`FormMessage`,j=c.forwardRef((e,t)=>{let{match:n,name:r,...i}=e,a=S(A,e.__scopeForm),o=r??a.name;return n===void 0?(0,l.jsx)(P,{...i,ref:t,name:o,children:e.children||O}):typeof n==`function`?(0,l.jsx)(N,{match:n,...i,ref:t,name:o}):(0,l.jsx)(M,{match:n,...i,ref:t,name:o})});j.displayName=A;var M=c.forwardRef((e,t)=>{let{match:n,forceMatch:r=!1,name:i,children:a,...o}=e,s=g(A,o.__scopeForm).getFieldValidity(i);return r||s?.[n]?(0,l.jsx)(P,{ref:t,...o,name:i,children:a??k[n]}):null}),N=c.forwardRef((e,t)=>{let{match:n,forceMatch:a=!1,name:o,id:s,children:u,...d}=e,f=g(A,d.__scopeForm),p=c.useRef(null),m=i(t,p),h=r(),_=s??h,v=c.useMemo(()=>({id:_,match:n}),[_,n]),{onFieldCustomMatcherEntryAdd:y,onFieldCustomMatcherEntryRemove:b}=f;c.useEffect(()=>(y(o,v),()=>b(o,v.id)),[v,o,y,b]);let x=f.getFieldValidity(o),S=f.getFieldCustomErrors(o)[_];return a||x&&!q(x)&&S?(0,l.jsx)(P,{id:_,ref:m,...d,name:o,children:u??O}):null}),P=c.forwardRef((e,t)=>{let{__scopeForm:i,id:a,name:o,...s}=e,u=v(A,i),d=r(),f=a??d,{onFieldMessageIdAdd:p,onFieldMessageIdRemove:m}=u;return c.useEffect(()=>(p(o,f),()=>m(o,f)),[o,f,p,m]),(0,l.jsx)(n.span,{id:f,...s,ref:t})}),F=`FormValidityState`,I=e=>{let{__scopeForm:t,name:n,children:r}=e,i=g(F,t),a=S(F,t),o=n??a.name,s=i.getFieldValidity(o);return(0,l.jsx)(l.Fragment,{children:r(s)})};I.displayName=F;var L=`FormSubmit`,R=c.forwardRef((e,t)=>{let{__scopeForm:r,...i}=e;return(0,l.jsx)(n.button,{type:`submit`,...i,ref:t})});R.displayName=L;function z(e){let t={};for(let n in e)t[n]=e[n];return t}function B(e){return e instanceof HTMLElement}function V(e){return`validity`in e}function H(e){return V(e)&&(e.validity.valid===!1||e.getAttribute(`aria-invalid`)===`true`)}function U(e){let t=e.elements,[n]=Array.from(t).filter(B).filter(H);return n}function W(e,t){return e.match.constructor.name===`AsyncFunction`||K(e.match,t)}function G(e){return e.match.constructor.name===`Function`}function K(e,t){return e(...t)instanceof Promise}function q(e){let t=!1;for(let n in e){let r=n;if(r!==`valid`&&r!==`customError`&&e[r]){t=!0;break}}return t}function J(e,t){if(e?.valid===!0&&!t)return!0}function Y(e,t){if(e?.valid===!1||t)return!0}var X=y,Z=C,Q=T;export{Q as n,X as r,Z as t};